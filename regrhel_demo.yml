---
# This play registers several hosts with the curl command generated by Satellite

- name: "Register a list existing hosts"
  hosts: "{{ reghost_list }}"
  become: true

  vars_files:
    - vars/curlcommand.yml

  tasks:

    - name: "Run the curl command generated by Satellite"
      ansible.builtin.shell: "{{ curl_cmd }}"
      register: result
      changed_when: result.rc == 0
      tags:
        - register
